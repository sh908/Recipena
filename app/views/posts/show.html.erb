<div class = "container">
  <div class = "row">
    <div class = "col-md-8 offset-md-1">
        <div class = "post-body">
          <%= attachment_image_tag @post, :image %>
            <p>料理名<%= @post.cook_name %></p>
            <p>レシピ（詳細）<%= @post.description %></p>
            <p>ユーザーネーム<%= @post.user.last_name %><%= @post.user.first_name %></p>
            <p>投稿日時<%= @post.created_at.strftime("%Y/%m/%d") %></p>
        
          <!--もし、投稿者 == 現在ログインしているユーザ だったら-->
          <% if @post.user == current_user %>
           <%= link_to "削除", post_path(@post), method: :delete %>
          <% end %>
        
          <!--投稿画像に付けられた「いいね」に、自分（ログインしているユーザ）が含まれているかを
          favorited_by?メソッドで判定していてPostモデルで実装しているメソッド-->
          <% if @post.favorited_by?(current_user) %>
            <p>
              <%= link_to post_favorites_path(@post),method: :delete do %>
               ♥<%= @post.favorites.count %>いいね
              <% end %>
            </p>
          <% else %>
            <p>
              <%= link_to post_favorites_path(@post), method: :post do %>
               ♡<%= @post.favorites.count %> いいね
              <% end %>
            </p>
          <% end %>
        </div>
        
        <div class = "comments">
          <p>コメント件数:<%= @post.post_comments.count %></p>
          <% @post.post_comments.each do |post_comment| %>
            <p><%= attachment_image_tag post_comment.user, :profile_image, :fill, 60, 60, fallback: "no-image.jpeg" %></p>
            <%= post_comment.user.last_name %><%= post_comment.user.first_name %>
            <%= post_comment.created_at.strftime('%Y/%m/%d') %><%= post_comment.comment %>
            <% if post_comment.user == current_user %>
              <div class = "comment-delete">
               <%= link_to "削除", post_post_comment_path(post_comment.post, post_comment), method: :delete %>
              </div>
            <% end %>
          <% end %>
        </div>
        
        <div class = "new-comment">
          <%= form_with model:[@post, @post_comment], local: true do |f| %>
            <%= f.text_area :comment, rows:'5', placeholder: "コメントをここに" %>
            <%= f.submit "送信" %>
          <% end %>
        </div>
    </div>
  </div>
</div>