<div class = "container">
  
        <div class="post-detail py-5 bg-light">
  <div class="card w-75 mx-auto mt-4 shadow-lg">
    <%= attachment_image_tag @post, :image, class:"card-img-top"; %>
    <div class="card-body">
      <div class="row">
        <div class="col-2">
          <%= attachment_image_tag @post.user, :profile_image, :fill, 60, 60, fallback: "no-image.jpeg", class:"mt-3 rounded-circle"; %>
        </div>
        <div class="col-10">
          <p class="card-title">
            <%= link_to(post_path(@post.id), class:"text-dark") do %>
              <strong><i class="far fa-flag"></i><span> <%= @post.cook_name %></span></strong>
            <% end %>
          </p>
          <p class="card-title">説明：<%= @post.description %></p>
          <span><i class="fas fa-user"></i> 名前 <%= @post.user.last_name %><%= @post.user.first_name %></span>
          <span><i class="far fa-calendar-alt"></i> <%= @post.created_at.strftime('%Y/%m/%d') %></span>
          <span><i class="fa fa-comment"></i> <%= link_to "#{@post.post_comments.count}", post_path(@post.id), class:"text-dark" %></span>
          <!--もし、投稿者 == 現在ログインしているユーザ だったら-->
          <% if @post.user == current_user %>
           <%= link_to "削除", post_path(@post), method: :delete %>
          <% end %>
        
          <!--投稿画像に付けられた「いいね」に、自分（ログインしているユーザ）が含まれているかを
          favorited_by?メソッドで判定していてPostモデルで実装しているメソッド-->
          <% if @post.favorited_by?(current_user) %>
            <p>
              <%= link_to post_favorites_path(@post),method: :delete do %>
               ♥<%= @post.favorites.count %>いいね
              <% end %>
            </p>
          <% else %>
            <p>
              <%= link_to post_favorites_path(@post), method: :post do %>
               ♡<%= @post.favorites.count %> いいね
              <% end %>
            </p>
          <% end %>
        </div>
        
        <div class = "comments">
          <p>コメント件数:<%= @post.post_comments.count %></p>
          <% @post.post_comments.each do |post_comment| %>
            <p><%= attachment_image_tag post_comment.user, :profile_image, :fill, 60, 60, fallback: "no-image.jpeg" %></p>
            <%= post_comment.user.last_name %><%= post_comment.user.first_name %>
            <%= post_comment.created_at.strftime('%Y/%m/%d') %><%= post_comment.comment %>
            <% if post_comment.user == current_user %>
              <div class = "comment-delete">
               <%= link_to "削除", post_post_comment_path(post_comment.post, post_comment), method: :delete %>
              </div>
            <% end %>
          <% end %>
        </div>
        
        <div class = "new-comment card-text">
          <%= form_with model:[@post, @post_comment], local: true do |f| %>
            <%= f.text_area :comment, rows:'5',class: "form-control", placeholder: "コメントをここに" %>
            <%= f.submit "送信", class:"btn btn-info mt2 float-right" %>
          <% end %>
        </div>
    </div>
  </div>
</div>